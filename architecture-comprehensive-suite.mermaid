graph TB
    %% Core System Ecosystem - Complete 38+ Feature Suite
    subgraph "CoreSuite [🎯 TweetCraft AI Suite - 38+ Features]"
        subgraph "ContentGen [🚀 Content Generation (7 Features)]"
            ReplyGen["💬 AI Reply Generation<br/>✅ 12 tones, context-aware<br/>✅ Thread analysis (4 tweets)<br/>✅ Custom prompts"]
            
            TweetGen["✨ AI Tweet Creation<br/>🔄 Topic-to-tweet generation<br/>🔄 Style options (engaging/educational)<br/>🔄 Auto hashtag suggestions"]
            
            ThreadComp["🧵 Thread Composer<br/>🔄 Multi-tweet structuring<br/>🔄 Flow optimization<br/>🔄 Character management"]
            
            QuoteGen["💬 Quote Tweet Generator<br/>🔄 Intelligent commentary<br/>🔄 Context-aware quotes<br/>🔄 Engagement optimization"]
            
            BulkGen["📊 Bulk Generator<br/>🔄 Multiple tweets simultaneously<br/>🔄 Template-based batching<br/>🔄 Scheduled preparation"]
            
            SmartEnhance["⚡ Smart Enhancement<br/>🔄 AI content optimization<br/>🔄 Engagement improvements<br/>🔄 Tone adjustments"]
            
            O3Advanced["🧠 O3 Advanced Writing<br/>🔄 Cutting-edge models<br/>🔄 Complex reasoning<br/>🔄 Premium quality output"]
        end
        
        subgraph "Research [🔍 Research & Analysis (10 Features)]"
            ResearchAssist["🔬 Research Assistant<br/>✅ Real-time data (Perplexity)<br/>✅ Multiple depth levels<br/>✅ Source citations"]
            
            ContentAnalysis["📊 Content Analysis<br/>✅ Sentiment analysis<br/>✅ Engagement prediction<br/>✅ Viral assessment"]
            
            ThreadAnalysis["🧵 Thread Analysis<br/>🔄 Structure optimization<br/>🔄 Coherence scoring<br/>🔄 Flow analysis"]
            
            FactCheck["✅ Fact Checker<br/>🔄 Real-time verification<br/>🔄 Source validation<br/>🔄 Misinformation detection"]
            
            PsychSuite["🧠 Psychology Suite<br/>🔄 Emotional analysis<br/>🔄 Persuasion techniques<br/>🔄 Behavioral impact"]
            
            UnifiedAnalysis["🤖 Unified AI Analysis<br/>🔄 Multi-dimensional insights<br/>🔄 Cross-model analysis<br/>🔄 Comprehensive reports"]
            
            AudienceInsights["👥 Audience Insights<br/>🔄 Demographics analysis<br/>🔄 Engagement patterns<br/>🔄 Posting optimization"]
            
            PsychAnalytics["📊 Psychology Analytics<br/>🔄 Behavioral patterns<br/>🔄 Engagement psychology<br/>🔄 Content effectiveness"]
        end
        
        subgraph "Automation [🤖 Automation & Workflow (8 Features)]"
            AutoPost["🚀 Automated Posting<br/>🔄 RapidAPI TwttrAPI primary<br/>🔄 Intent + DOM fallbacks<br/>🔄 Safety toggles (OFF default)"]
            
            WorkflowMgr["🔄 Workflow Manager<br/>🔄 Template automation<br/>🔄 Multi-step workflows<br/>🔄 Scheduled actions"]
            
            GrowthAnalytics["📈 Growth Analytics<br/>🔄 Follower trends<br/>🔄 Engagement monitoring<br/>🔄 Performance dashboard"]
            
            EngagementDash["❤️ Engagement Dashboard<br/>🔄 Real-time monitoring<br/>🔄 Interaction tracking<br/>🔄 Community health"]
            
            CommandPalette["⌨️ Command Palette<br/>🔄 Keyboard shortcuts<br/>🔄 Quick actions<br/>🔄 Custom commands"]
            
            InlineComposer["✏️ Inline Composer<br/>🔄 Floating toolbar<br/>🔄 Context suggestions<br/>🔄 Quick actions"]
            
            BulkOperations["⚡ Bulk Advanced Operations<br/>🔄 Multi-account support<br/>🔄 Complex filtering<br/>🔄 Batch processing"]
        end
        
        subgraph "Advanced [🔬 Advanced AI Features (13+ Features)]"
            PersonaMgmt["👤 Persona Management<br/>🔄 Multiple voices<br/>🔄 Brand consistency<br/>🔄 Voice switching"]
            
            ModelComparison["⚖️ Model Comparison<br/>🔄 Side-by-side generation<br/>🔄 Performance metrics<br/>🔄 Cost analysis"]
            
            NBestGen["🎪 N-Best Generation<br/>🔄 3 variants per request<br/>🔄 Style roulette<br/>🔄 Parameter jitter"]
            
            QualityRerank["🏆 Quality Reranking<br/>🔄 Cohere-powered filtering<br/>🔄 Human-preference learning<br/>🔄 Cliche detection"]
            
            NoveltyGate["🛡️ Novelty Gate<br/>🔄 3-gram Jaccard similarity<br/>🔄 Duplicate prevention<br/>🔄 200-item history"]
            
            CadenceMimic["🎯 Cadence Mimic<br/>🔄 Top-reply style matching<br/>🔄 Punctuation adaptation<br/>🔄 Length optimization"]
            
            OneCrumb["🔍 One-Crumb Facts<br/>🔄 Perplexity integration<br/>🔄 18-word facts<br/>🔄 40% chance, 450ms limit"]
            
            TopicRouting["🎯 Topic-Aware Routing<br/>🔄 Code/Finance/General detection<br/>🔄 Model optimization<br/>🔄 Performance/cost balance"]
            
            HistoryViewer["📚 History Viewer<br/>🔄 Complete generation history<br/>🔄 Search and filter<br/>🔄 Re-use content"]
        end
    end

    %% Multi-API Integration Ecosystem
    subgraph "APIs [🌐 Multi-Provider API Ecosystem (7+ Providers)]"
        subgraph "Primary [Primary AI & Core Providers]"
            OpenRouter["🤖 OpenRouter<br/>✅ GPT-4, Claude, Gemini, Llama<br/>✅ 50+ models<br/>✅ Primary generation"]
            
            RapidAPI["⚡ RapidAPI Hub<br/>🔄 TwttrAPI posting<br/>🔄 Old Bird context<br/>🔄 Multiple providers"]
            
            Perplexity["🔍 Perplexity<br/>🔄 Real-time research<br/>🔄 Fact-checking<br/>🔄 Source validation"]
            
            Twitter154["📱 Twitter154<br/>🔄 Alternative context<br/>🔄 Backup API provider<br/>🔄 Rate limiting"]
        end
        
        subgraph "Enhancement [Quality Enhancement & Analysis APIs]"
            Cohere["🏆 Cohere<br/>🔄 Response reranking<br/>🔄 Quality filtering<br/>🔄 Embedding models"]
            
            JinaAI["🔗 Jina AI<br/>🔄 Advanced embeddings<br/>🔄 Semantic analysis<br/>🔄 Content understanding"]
            
            ExaAI["🔎 Exa AI<br/>🔄 Web search<br/>🔄 Content discovery<br/>🔄 Trend analysis"]
            
            XAI["🆚 X.AI (Grok)<br/>🔄 Alternative models<br/>🔄 Competitive analysis<br/>🔄 Latest AI capabilities"]
            
            MicrolinkAPI["🔗 Microlink API<br/>🔄 URL analysis<br/>🔄 Metadata extraction<br/>🔄 Link processing"]
        end
    end

    %% Enhanced Processing Pipeline
    subgraph "Pipeline [🧠 Advanced AI Processing Pipeline]"
        MultiContext["🧵 Multi-Context Analysis<br/>🔄 Thread reconstruction<br/>🔄 Cross-tweet analysis<br/>🔄 User history awareness<br/>🔄 Real-time data inclusion"]
        
        AdvancedGeneration["⚡ Advanced Generation Pipeline<br/>🔄 N-best structured output<br/>🔄 Style roulette (5 types)<br/>🔄 Parameter jitter<br/>🔄 Topic-aware routing"]
        
        QualityPipeline["🏆 Quality Enhancement Pipeline<br/>🔄 Cohere reranking (≤450ms)<br/>🔄 Novelty gate (Jaccard ≥0.58)<br/>🔄 Cadence matching<br/>🔄 One-crumb fact enhancement"]
        
        PostingChain["🚀 Automated Posting Chain<br/>🔄 TwttrAPI (RapidAPI primary)<br/>🔄 Share Intent fallback<br/>🔄 DOM click backup<br/>🔄 3-second UNDO safety"]
        
        AnalyticsEngine["📊 Real-time Analytics Engine<br/>🔄 Performance monitoring<br/>🔄 Engagement tracking<br/>🔄 Growth prediction<br/>🔄 Psychology analysis"]
    end

    %% Comprehensive User Interface Ecosystem
    subgraph "UI [🎨 Multi-Modal User Interface Ecosystem]"
        subgraph "ExtensionPopup [Extension Control Center]"
            MultiAPIKeys["🔑 Multi-API Key Management<br/>OpenRouter/Rapid/Perplexity<br/>Cohere/Jina/Exa/X.AI<br/>Secure storage & testing"]
            
            ContentControls["📝 Content Generation Controls<br/>Model routing/Temperature<br/>Persona management<br/>Advanced AI features"]
            
            AutomationSettings["🤖 Automation Configuration<br/>Auto-post toggle (OFF default)<br/>Posting chain config<br/>Safety & rollback features"]
            
            AnalyticsControls["📊 Analytics & Insights<br/>Growth tracking config<br/>Psychology analytics<br/>Performance monitoring"]
            
            WorkflowConfig["🔄 Workflow Configuration<br/>Template automation<br/>Bulk operations<br/>Scheduled actions"]
        end
        
        subgraph "TwitterIntegration [Enhanced Twitter Integration]"
            ComprehensiveToolbar["🔧 Comprehensive Action Toolbar<br/>[✨AI Reply] [🧵Thread] [📊Analytics]<br/>[🔍Research] [💡Enhance] [⚡Bulk]<br/>[🎭Personas] [📚History] [⌨️Palette]"]
            
            CommandInterface["⌨️ Command Palette Interface<br/>Ctrl+Shift+T: Open palette<br/>Alt+R: Quick reply<br/>Alt+T: Create tweet<br/>Alt+A: Analyze content<br/>Custom shortcuts"]
            
            AnalyticsOverlays["📊 Real-time Analytics Overlays<br/>Engagement predictions<br/>Viral potential scores<br/>Psychology insights<br/>Performance metrics"]
            
            ResearchPanels["🔍 Research & Analysis Panels<br/>Real-time fact checking<br/>Source validation<br/>Topic analysis<br/>Context enhancement"]
            
            WorkflowInterfaces["🔄 Workflow Interfaces<br/>Bulk operation controls<br/>Template automation<br/>Scheduled posting<br/>Progress tracking"]
        end
        
        subgraph "AdvancedInterfaces [Advanced Feature Interfaces]"
            ThreadBuilder["🧵 Thread Builder Interface<br/>Multi-tweet composition<br/>Structure optimization<br/>Flow analysis<br/>Auto-numbering"]
            
            PersonaManager["👤 Persona Management UI<br/>Voice switching<br/>Brand consistency<br/>Tone monitoring<br/>Team collaboration"]
            
            AnalyticsDashboard["📊 Comprehensive Analytics<br/>Growth tracking<br/>Engagement analysis<br/>Psychology metrics<br/>Performance insights"]
            
            HistoryManager["📚 Generation History<br/>Complete tracking<br/>Search & filter<br/>Re-use content<br/>Performance analysis"]
        end
    end

    %% Flow Connections
    ContentGen --> MultiContext
    Research --> AdvancedGeneration  
    Automation --> QualityPipeline
    Advanced --> PostingChain
    
    MultiAPIKeys --> OpenRouter
    MultiAPIKeys --> RapidAPI
    MultiAPIKeys --> Perplexity
    ContentControls --> AdvancedGeneration
    AutomationSettings --> PostingChain
    
    ComprehensiveToolbar --> MultiContext
    CommandInterface --> QualityPipeline
    AnalyticsOverlays --> AnalyticsEngine
    ResearchPanels --> AdvancedGeneration
    
    %% Advanced feature flows
    ThreadBuilder --> AdvancedGeneration
    PersonaManager --> QualityPipeline
    AnalyticsDashboard --> AnalyticsEngine
    HistoryManager --> MultiContext
    
    %% Styling
    classDef core fill:#e8f5e8,stroke:#388e3c,stroke-width:3px
    classDef apis fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef pipeline fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef ui fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    
    class ContentGen,Research,Automation,Advanced core
    class Primary,Enhancement apis
    class MultiContext,AdvancedGeneration,QualityPipeline,PostingChain,AnalyticsEngine pipeline
    class ExtensionPopup,TwitterIntegration,AdvancedInterfaces ui
